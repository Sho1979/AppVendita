{
  "meta": {
    "project": "Calendario Vendite",
    "date": "2025-07-30",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Calendario Vendite is an advanced multi-platform sales calendar application designed to enable agents and managers to efficiently manage client-related data with real-time synchronization via Firebase. The app features a robust progressive calculation engine for sales metrics, a dynamic calendar with multiple views, advanced filtering, and collaborative multi-user support.",
  "core_goals": [
    "Provide a seamless multi-user sales calendar experience centered on client data persistence using Firebase backend.",
    "Enable real-time progressive calculations of sales and orders based on a chronological timeline, with automatic recalculations upon data modifications.",
    "Offer advanced multi-level filtering capabilities for agents, sales points, and products to streamline data views.",
    "Ensure fluid and responsive UI even with large datasets and complex calculations through performance optimization techniques.",
    "Maintain high data consistency, integrity, and security across concurrent users with role-based permissions.",
    "Support offline and online transitions with synchronization strategies to allow uninterrupted workflow.",
    "Facilitate robust authentication, session persistence, and secure user management via Firebase Auth.",
    "Provide comprehensive testing coverage including unit, integration, UI, and performance tests to ensure reliability and quality."
  ],
  "key_features": [
    "Complete Firebase Authentication system with login, registration, logout, password reset, and session persistence.",
    "Dynamic multi-view calendar (weekly and monthly) with real-time event synchronization and optimized virtualization for performance.",
    "Full CRUD management for calendar entries supporting sales, orders, tags, notes, chat, and attachments with robust data validation and error handling.",
    "Advanced progressive filtering system supporting multi-selection and textual search with interdependent filter correlation.",
    "Global state management using Zustand with local persistence and performance optimizations.",
    "Progressive calculation engine that recalculates sales and orders chronologically and triggers batch updates for large datasets.",
    "Comprehensive media handling including image capture, compression, upload to Firebase Storage, permissions, and integrated gallery.",
    "Import/export support for Excel data involving agents, customers, and price lists with validation and error management.",
    "Integrated chat and notes system within calendar entries featuring real-time notifications and messaging capabilities.",
    "Tagging and categorization system with configurable presets and visual UI color management.",
    "Cross-platform navigation system optimized for web, iOS, and Android including deep linking and tab navigation.",
    "Performance monitoring and optimization including lazy loading, memoization, batching, and real-time logging.",
    "Modular dependency injection architecture using repository and service patterns, facilitating scalable development.",
    "Structured logging and debugging utilities with adjustable verbosity and throttling for production and dev environments.",
    "Robust error management with error boundaries, user-friendly notifications, and automatic retry mechanisms.",
    "Responsive design and theming adapting seamlessly across mobile, tablet, and web platforms.",
    "Context provider system for state and lifecycle management shared among components.",
    "Comprehensive automated testing framework supporting unit, integration, end-to-end, and performance test scenarios."
  ],
  "user_flow_summary": [
    "User authenticates via Firebase; sessions persist and auto-verify user state.",
    "User selects filter criteria (agents, clients, products) loading targeted client data from Firebase.",
    "User navigates calendar in weekly or monthly views, selecting specific dates or events.",
    "User opens a calendar cell, inputs or edits sales/orders and tags via entry form; validation applies.",
    "Progressive calculation engine recalculates sales/orders chronologically upon data modifications.",
    "Changes save immediately to Firebase, triggering live updates visible to all permitted users.",
    "Users communicate or annotate entries via integrated chat and notes with real-time sync.",
    "Users capture or upload media images linked to entries, handled with compression and optimized upload.",
    "Users import/export data sets via Excel files, validated and parsed for consistency.",
    "Users navigate app sections via optimized multi-tab React Navigation adapted per platform.",
    "System monitors performance continuously, triggering optimizations like lazy loading and batching.",
    "Error states handled gracefully with fallback UI, notifications, and automatic retry when needed."
  ],
  "validation_criteria": [
    "Firebase Authentication passes tests for login, registration, logout, and password reset flows with session persistence.",
    "Calendar views correctly render weekly and monthly events with performant virtualization and smooth navigation.",
    "CRUD operations on calendar entries complete reliably with data validation and error handling.",
    "Filters correctly include/exclude data and reflect user selections accurately with correct dependencies.",
    "Progressive calculation engine produces accurate, chronologically consistent results with confirmed recalculation on edits.",
    "Real-time synchronization with Firebase ensures data consistency across multiple users and devices.",
    "Media upload system correctly captures, compresses, uploads, and displays images with proper permissions.",
    "Import/export workflows for Excel validate and transform data robustly without data loss or corruption.",
    "Chat functionality synchronizes messages and reactions in real-time with notifications.",
    "Cross-platform navigation works seamlessly with deep linking and tab transitions on web, iOS, and Android.",
    "Performance benchmarks show low latency and memory use during large dataset handling and progressive calculations.",
    "Error management mechanisms handle failures gracefully with informative user notifications and retries.",
    "Automated test coverage exceeds threshold for unit, integration, UI, and performance tests ensuring development reliability."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React Native",
      "Expo",
      "Firebase",
      "Zustand",
      "React Navigation",
      "Firestore",
      "Firebase Auth",
      "Firebase Storage",
      "React Native Calendars",
      "AsyncStorage",
      "Jest"
    ],
    "features": [
      {
        "name": "Autenticazione Firebase",
        "description": "Sistema di autenticazione completo con login, registrazione, logout e reset password utilizzando Firebase Auth. Include gestione persistente delle sessioni e verifica automatica dell'utente.",
        "files": [
          "App.tsx",
          "src/hooks/useAuth.ts",
          "src/core/services/firebaseAuth.ts",
          "src/presentation/pages/LoginPage.tsx",
          "src/presentation/components/LoginModal.tsx"
        ]
      },
      {
        "name": "Calendario Dinamico Multi-Vista",
        "description": "Sistema di calendario avanzato con vista settimanale e mensile. Include navigazione intuitiva, selezione di date, gestione eventi e sincronizzazione real-time. Supporta virtualizzazione per performance ottimali.",
        "files": [
          "src/presentation/pages/MainCalendarPage.tsx",
          "src/presentation/components/WeekCalendar.tsx",
          "src/presentation/components/VirtualizedMonthCalendar.tsx",
          "src/presentation/components/optimized/MemoizedWeekCalendar.tsx",
          "src/presentation/components/optimized/VirtualizedMonthCalendar.tsx",
          "src/presentation/components/calendar/CalendarUI.tsx",
          "src/presentation/components/calendar/CalendarHelpers.tsx"
        ]
      },
      {
        "name": "Gestione Entries Calendario",
        "description": "Sistema CRUD completo per la gestione delle entries del calendario con supporto per vendite, azioni, note, chat, tag e allegati. Include validazione dati e gestione errori robusta.",
        "files": [
          "src/data/models/CalendarEntry.ts",
          "src/presentation/components/EntryFormModal.tsx",
          "src/presentation/components/CustomCalendarCell.tsx",
          "src/services/FirebaseCalendarService.ts",
          "src/data/repositories/firebaseCalendarRepository.ts",
          "src/data/repositories/CalendarRepository.ts"
        ]
      },
      {
        "name": "Sistema di Filtri Avanzati",
        "description": "Filtri multipli e progressivi per agenti, punti vendita, linee di prodotto, area manager e NAM. Include ricerca testuale, selezione multipla e correlazione automatica dei dati.",
        "files": [
          "src/presentation/components/FilterComponents.tsx",
          "src/stores/filtersStore.ts",
          "src/hooks/useOptimizedExcelData.ts",
          "src/hooks/useFirebaseExcelData.ts"
        ]
      },
      {
        "name": "State Management con Zustand",
        "description": "Gestione dello stato globale utilizzando Zustand con persistenza locale. Include store separati per calendario, filtri, dati master e referenze focus con ottimizzazioni per performance.",
        "files": [
          "src/stores/calendarStore.ts",
          "src/stores/filtersStore.ts",
          "src/stores/masterDataStore.ts",
          "src/stores/staticDataStore.ts",
          "src/stores/focusReferencesStore.ts"
        ]
      },
      {
        "name": "Sistema Progressivo di Calcolo",
        "description": "Motore di calcolo progressivo per sell-in e metriche vendite con aggiornamenti cronologici automatici. Include gestione batch e ottimizzazioni per grandi dataset.",
        "files": [
          "src/services/ProgressiveCalculationService.ts",
          "src/hooks/useProgressiveCalculation.ts",
          "src/hooks/useProgressiveIntegration.ts",
          "src/hooks/useDefinitiveProgressiveData.ts",
          "src/hooks/useMemoizedCalculations.ts"
        ]
      },
      {
        "name": "Gestione Media e Foto",
        "description": "Sistema completo per cattura, compressione e upload di immagini con Firebase Storage. Include gestione permessi, ottimizzazione automatica e galleria integrata.",
        "files": [
          "src/services/PhotoService.ts",
          "src/services/FirebasePhotoService.ts",
          "src/services/ImageCompressionService.ts",
          "src/hooks/usePhotoManager.ts",
          "src/utils/imageOptimization.ts",
          "src/utils/cameraConfig.ts"
        ]
      },
      {
        "name": "Import/Export Dati Excel",
        "description": "Sistema di importazione ed esportazione dati Excel per agenti, clienti e listini prezzi. Include validazione, parsing robusto e gestione errori.",
        "files": [
          "src/data/models/ExcelData.ts",
          "src/services/DataAdapter.ts",
          "src/hooks/useFirebaseExcelData.ts",
          "src/hooks/useOptimizedExcelData.ts"
        ]
      },
      {
        "name": "Sistema di Chat e Note",
        "description": "Chat system integrato nelle entries del calendario con supporto per messaggi multipli, reazioni, reply e timestamp. Include notifiche real-time.",
        "files": [
          "src/presentation/components/TooltipModal.tsx",
          "src/presentation/components/calendar/TooltipManagement.tsx",
          "src/data/models/CalendarEntry.ts"
        ]
      },
      {
        "name": "Tag e Categorizzazione",
        "description": "Sistema di tagging avanzato per categorizzare azioni, problemi e stati. Include predefiniti configurabili e gestione visuale con colori.",
        "files": [
          "src/constants/Tags.ts",
          "src/presentation/components/CalendarCellTags.tsx",
          "src/presentation/components/common/CellTags.tsx"
        ]
      },
      {
        "name": "Navigazione Multi-Piattaforma",
        "description": "Sistema di navigazione React Navigation con tab navigation e deep linking. Ottimizzato per web, iOS e Android con adattamenti platform-specific.",
        "files": [
          "src/presentation/navigation/MainTabNavigator.tsx",
          "src/presentation/pages/AccountPage.tsx"
        ]
      },
      {
        "name": "Gestione Performance",
        "description": "Sistema di monitoraggio e ottimizzazione performance con lazy loading, virtualizzazione, memoization e batching. Include metriche real-time e logging strutturato.",
        "files": [
          "src/hooks/usePerformance.ts",
          "src/hooks/useLazyComponents.ts",
          "src/hooks/useBatchedState.ts",
          "src/utils/performanceMonitor.tsx",
          "src/utils/optimizedLogging.ts"
        ]
      },
      {
        "name": "Dependency Injection e Architettura",
        "description": "Architettura basata su dependency injection con container IoC, pattern repository e service layer. Include setup modulare e configurazione avanzata.",
        "files": [
          "src/infrastructure/container.ts",
          "src/infrastructure/serviceSetup.ts",
          "src/hooks/useRepository.ts",
          "src/data/repositories/modules/CalendarEntryRepository.ts",
          "src/data/repositories/modules/PriceReferenceRepository.ts"
        ]
      },
      {
        "name": "Logging e Debug",
        "description": "Sistema di logging strutturato con categorizzazione, throttling e debug utilities. Include logging ottimizzato per produzione e development.",
        "files": [
          "src/utils/logger.ts",
          "src/utils/debugLogger.ts",
          "src/utils/optimizedLogging.ts"
        ]
      },
      {
        "name": "Gestione Errori e Resilienza",
        "description": "Error boundary, gestione errori Firebase, fallback UI e retry logic. Include notifiche user-friendly e recovery automatico.",
        "files": [
          "src/presentation/components/ErrorBoundary.tsx",
          "src/presentation/components/common/ErrorWidget.tsx",
          "src/presentation/components/common/LoadingWidget.tsx"
        ]
      },
      {
        "name": "Responsive Design e Theming",
        "description": "Design system completo con colori, spaziature e componenti responsive. Supporta adattamento automatico per web, tablet e mobile.",
        "files": [
          "src/constants/Colors.ts",
          "src/constants/Spacing.ts",
          "src/presentation/components/common/SafeTouchableOpacity.tsx",
          "src/utils/platformConfig.ts"
        ]
      },
      {
        "name": "Context Provider System",
        "description": "Sistema di context providers per condivisione stato tra componenti. Include calendar context, auth context e gestione lifecycle.",
        "files": [
          "src/presentation/providers/CalendarContext.tsx",
          "src/presentation/containers/CalendarViewContainer.tsx",
          "src/presentation/containers/DataLoadingContainer.tsx",
          "src/presentation/containers/EntryManagementContainer.tsx"
        ]
      },
      {
        "name": "Testing Framework",
        "description": "Suite di test completa con unit test, integration test, e2e test e performance test. Include setup automatizzato e coverage reporting.",
        "files": [
          "src/__tests__/setup.ts",
          "src/__tests__/simple.test.ts",
          "src/__tests__/components/CustomCalendarCell.test.tsx",
          "src/__tests__/hooks/useFirebaseCalendar.test.ts",
          "src/__tests__/services/FirebaseCalendarService.test.ts",
          "src/__tests__/stores/calendarStore.test.ts",
          "src/__tests__/performance/performance.test.ts",
          "src/__tests__/integration/integration.test.ts",
          "src/__tests__/e2e/e2e.test.ts"
        ]
      }
    ]
  }
}
